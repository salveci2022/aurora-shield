<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Aurora-Shield ¬∑ Painel da Mulher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #1a1e2b;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 12px;
        }

        .phone-panel {
            max-width: 400px;
            width: 100%;
            background: #f8f5f2;
            border-radius: 40px;
            padding: 24px 20px 32px 20px;
            box-shadow: 0 30px 50px rgba(0, 0, 0, 0.4), 0 0 0 10px #3a2e28;
            border: 2px solid #b7a08b;
        }

        .header-protected {
            display: flex;
            flex-direction: column;
            margin-bottom: 24px;
        }

        .main-title {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -0.5px;
            color: #231f1b;
            line-height: 1;
        }

        .main-title span {
            font-weight: 400;
            font-size: 18px;
            color: #6b4f3f;
            margin-left: 8px;
        }

        .aurora-badge {
            font-size: 14px;
            font-weight: 500;
            color: #b3597a;
            background: #f2dfe8;
            padding: 6px 14px;
            border-radius: 40px;
            align-self: flex-start;
            margin-top: 6px;
            border: 1px solid #dbb2c5;
        }

        .sos-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 28px;
        }

        .sos-label {
            font-size: 13px;
            font-weight: 600;
            color: #6d4f41;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .sos-button {
            background: #c32f3b;
            width: 180px;
            height: 180px;
            border-radius: 9999px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 0 #731f26, 0 15px 30px rgba(190, 40, 50, 0.4);
            border: 3px solid #ffb3aa;
            margin: 6px 0 6px;
            transition: all 0.05s ease;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        .sos-button:active {
            transform: translateY(6px);
            box-shadow: 0 4px 0 #731f26, 0 12px 25px rgba(190, 40, 50, 0.4);
        }

        .sos-button span:first-child {
            font-size: 46px;
            font-weight: 900;
            color: white;
            letter-spacing: 4px;
            text-shadow: 2px 2px 0 #540f16;
            line-height: 1;
        }

        .sos-button span:last-child {
            font-size: 16px;
            font-weight: 600;
            color: #ffe6e3;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-top: -4px;
        }

        .touch-hint {
            font-size: 13px;
            color: #896b5b;
            background: #ece2da;
            padding: 6px 16px;
            border-radius: 30px;
            font-weight: 500;
            border: 1px dashed #b4937e;
            margin-top: 8px;
        }

        .trusted-section {
            background: #f0e7e0;
            border-radius: 28px;
            padding: 18px 16px;
            margin-bottom: 20px;
            border: 1px solid #dacbbc;
        }

        .section-title {
            font-size: 15px;
            font-weight: 700;
            color: #401f12;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .trusted-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .trusted-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
            padding: 8px 16px 8px 14px;
            border-radius: 40px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            border: 1px solid #ebdad0;
        }

        .trusted-info {
            display: flex;
            flex-direction: column;
        }

        .trusted-name {
            font-weight: 700;
            font-size: 16px;
            color: #2a211c;
        }

        .trusted-phone {
            font-size: 13px;
            color: #7f685b;
            letter-spacing: 0.2px;
        }

        .trusted-tag {
            background: #dbc9bc;
            padding: 6px 12px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 600;
            color: #3b2a20;
        }

        .user-name-block {
            background: #dac2b2;
            border-radius: 30px;
            padding: 10px 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            border: 1px solid #b5947e;
        }

        .user-label {
            font-weight: 500;
            color: #4d3324;
            font-size: 15px;
        }

        .user-value {
            font-weight: 800;
            font-size: 20px;
            color: #1f130c;
            background: #f1e1d6;
            padding: 4px 16px;
            border-radius: 50px;
        }

        .situation-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 16px 0 20px;
        }

        .situation-item {
            background: #ede0d7;
            border: 2px solid #c9b1a1;
            padding: 10px 16px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 15px;
            color: #3c2c22;
            box-shadow: 0 3px 0 #aa8b78;
            cursor: pointer;
            transition: 0.05s linear;
            user-select: none;
        }

        .situation-item.selected {
            background: #c32f3b;
            color: white;
            border-color: #ffb3aa;
            box-shadow: 0 3px 0 #731f26;
        }

        .situation-item:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #aa8b78;
        }

        .message-box {
            background: #f4ede7;
            border-radius: 24px;
            padding: 16px;
            border: 1px solid #d8c3b6;
            margin-bottom: 20px;
        }

        .message-label {
            font-weight: 600;
            margin-bottom: 6px;
            color: #3e2c21;
            font-size: 15px;
        }

        .message-field {
            width: 100%;
            background: white;
            border-radius: 30px;
            padding: 14px 18px;
            color: #35322f;
            border: 1px solid #cfb9ab;
            font-size: 15px;
            margin-bottom: 14px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
            resize: none;
        }

        .gps-row {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #e2d4cb;
            border-radius: 40px;
            padding: 10px 16px;
            font-weight: 500;
            color: #2c1d15;
            border: 1px solid #b49480;
        }

        .gps-row input {
            width: 22px;
            height: 22px;
            accent-color: #aa3863;
            transform: scale(1.1);
            margin-right: 4px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 28px 0 20px;
        }

        .action-btn {
            background: #e6d5ca;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 16px;
            color: #352217;
            box-shadow: 0 4px 0 #b19482;
            border: 1px solid #ccb5a6;
            flex: 1;
            text-align: center;
            cursor: pointer;
            transition: 0.05s linear;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .action-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #b19482;
        }

        .action-btn.sair {
            background: #d0b9ab;
        }

        .recent-alerts {
            background: #ded0c5;
            border-radius: 22px;
            padding: 16px;
            margin-top: 12px;
            border: 1px solid #b29888;
        }

        .recent-title {
            font-weight: 800;
            font-size: 15px;
            color: #3f271b;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .alert-item {
            background: #efe2d9;
            border-radius: 18px;
            padding: 12px 14px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            border-left: 6px solid #b6576a;
            box-shadow: 0 2px 8px rgba(85, 45, 30, 0.1);
        }

        .alert-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }

        .alert-label {
            font-weight: 500;
            color: #6b4a38;
        }

        .alert-value {
            font-weight: 700;
            color: #281a12;
        }

        .location-badge {
            background: #4f7960;
            color: white;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 600;
            align-self: flex-start;
        }

        hr {
            border: 1px solid #cab7ab;
            margin: 16px 0 10px;
        }
        
        .footer-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            font-size: 12px;
            color: #8b6f5e;
            border-top: 1px dashed #cbb5a7;
            padding-top: 16px;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading.active {
            display: flex;
        }

        .loading-spinner {
            background: white;
            padding: 20px;
            border-radius: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="loading-spinner">üìç Obtendo localiza√ß√£o...</div>
    </div>

    <div class="phone-panel">
        <div class="header-protected">
            <div class="main-title">
                AURORA-SHIELD <span>¬∑ protegendo</span>
            </div>
            <div class="aurora-badge">
                ‚ú¶ Sistema de Prote√ß√£o Ativa ‚ú¶
            </div>
        </div>

        <div class="sos-section">
            <div class="sos-label">BOT√ÉO DE P√ÇNICO</div>
            <div class="sos-button" id="sosButton">
                <span>SOS</span>
                <span>toque para alertar</span>
            </div>
            <div class="touch-hint">‚ñº toque uma vez para enviar alerta</div>
        </div>

        <div class="trusted-section">
            <div class="section-title">üë• PESSOAS DE CONFIAN√áA</div>
            <div class="trusted-list">
                <div class="trusted-item">
                    <div class="trusted-info">
                        <span class="trusted-name">CLECI</span>
                        <span class="trusted-phone">(11) 99999-9999</span>
                    </div>
                    <span class="trusted-tag">Irm√£</span>
                </div>
                <div class="trusted-item">
                    <div class="trusted-info">
                        <span class="trusted-name">MARIA</span>
                        <span class="trusted-phone">(11) 98888-7777</span>
                    </div>
                    <span class="trusted-tag">M√£e</span>
                </div>
                <div class="trusted-item">
                    <div class="trusted-info">
                        <span class="trusted-name">JO√ÉO</span>
                        <span class="trusted-phone">(11) 97777-6666</span>
                    </div>
                    <span class="trusted-tag">Pai</span>
                </div>
            </div>
        </div>

        <div class="user-name-block">
            <span class="user-label">SEU NOME</span>
            <span class="user-value" id="userName">MARISA</span>
        </div>

        <div style="font-weight: 700; margin: 6px 0 8px; color: #513b2e;">TIPO DE SITUA√á√ÉO</div>
        <div class="situation-grid" id="situationGrid">
            <span class="situation-item" data-situacao="Viol√™ncia f√≠sica">Viol√™ncia f√≠sica</span>
            <span class="situation-item" data-situacao="Agress√£o verbal">Agress√£o verbal</span>
            <span class="situation-item" data-situacao="Persegui√ß√£o">Persegui√ß√£o</span>
            <span class="situation-item" data-situacao="Risco iminente">Risco iminente</span>
        </div>

        <div class="message-box">
            <div class="message-label">üìù MENSAGEM (OPCIONAL)</div>
            <textarea class="message-field" id="mensagem" rows="2" placeholder="Descreva rapidamente o que est√° acontecendo..."></textarea>
            <div class="gps-row">
                <input type="checkbox" id="gpsCheck" checked>
                <label for="gpsCheck" style="flex:1; font-weight: 500;">üìç Compartilhar localiza√ß√£o exata (GPS)</label>
            </div>
        </div>

        <div class="action-buttons">
            <span class="action-btn" id="reenviarBtn">REENVIAR</span>
            <span class="action-btn" id="limparBtn">LIMPAR</span>
            <span class="action-btn sair" id="sairBtn">SAIR</span>
        </div>

        <div class="recent-alerts">
            <div class="recent-title">üìã √öLTIMOS ALERTAS</div>
            <div id="ultimoAlerta" class="alert-item">
                <div class="alert-row">
                    <span class="alert-label">DATA/HORA:</span>
                    <span class="alert-value" id="alertaData">--</span>
                </div>
                <div class="alert-row">
                    <span class="alert-label">SITUA√á√ÉO:</span>
                    <span class="alert-value" id="alertaSituacao">--</span>
                </div>
                <div class="alert-row">
                    <span class="alert-label">LOCALIZA√á√ÉO:</span>
                    <span class="location-badge" id="alertaLocal">--</span>
                </div>
            </div>
            <hr>
            <div style="font-size:13px; color:#5e4233; text-align:center; font-weight:500;">√∫ltimo alerta em destaque</div>
        </div>
        
        <div class="footer-info">
            <span>Aurora-Shield v1.0</span>
            <span id="dataHora"></span>
        </div>
    </div>

    <script>
        // Elementos do DOM
        const sosButton = document.getElementById('sosButton');
        const userName = document.getElementById('userName');
        const mensagem = document.getElementById('mensagem');
        const gpsCheck = document.getElementById('gpsCheck');
        const loading = document.getElementById('loading');
        const alertaData = document.getElementById('alertaData');
        const alertaSituacao = document.getElementById('alertaSituacao');
        const alertaLocal = document.getElementById('alertaLocal');
        const dataHora = document.getElementById('dataHora');
        
        let situacaoSelecionada = 'Viol√™ncia f√≠sica';
        let ultimaLocalizacao = null;

        // Atualizar data/hora
        function atualizarDataHora() {
            const agora = new Date();
            dataHora.textContent = agora.toLocaleString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        setInterval(atualizarDataHora, 1000);
        atualizarDataHora();

        // Selecionar situa√ß√£o
        document.querySelectorAll('.situation-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.situation-item').forEach(i => i.classList.remove('selected'));
                this.classList.add('selected');
                situacaoSelecionada = this.dataset.situacao;
            });
        });
        
        // Selecionar primeiro item por padr√£o
        document.querySelector('.situation-item').classList.add('selected');

        // Fun√ß√£o para obter localiza√ß√£o
        function obterLocalizacao() {
            return new Promise((resolve, reject) => {
                if (!gpsCheck.checked) {
                    resolve(null);
                    return;
                }

                if (!navigator.geolocation) {
                    alert('Geolocaliza√ß√£o n√£o suportada');
                    resolve(null);
                    return;
                }

                loading.classList.add('active');
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        loading.classList.remove('active');
                        const loc = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        ultimaLocalizacao = loc;
                        resolve(loc);
                    },
                    (error) => {
                        loading.classList.remove('active');
                        console.error('Erro ao obter localiza√ß√£o:', error);
                        alert('N√£o foi poss√≠vel obter a localiza√ß√£o. Verifique as permiss√µes.');
                        resolve(null);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            });
        }

        // Fun√ß√£o para enviar alerta
        async function enviarAlerta() {
            try {
                // Obter localiza√ß√£o
                const localizacao = await obterLocalizacao();
                
                // Criar objeto do alerta
                const alerta = {
                    id: Date.now(),
                    nome: userName.textContent,
                    situacao: situacaoSelecionada,
                    mensagem: mensagem.value || 'Socorro, preciso de ajuda!',
                    dataHora: new Date().toLocaleString('pt-BR'),
                    timestamp: Date.now(),
                    localizacao: localizacao,
                    status: 'ativo'
                };

                // Salvar no localStorage
                localStorage.setItem('aurora_alerta_ativo', 'true');
                localStorage.setItem('aurora_ultimo_alerta', JSON.stringify(alerta));

                // Atualizar √∫ltimo alerta na interface
                alertaData.textContent = alerta.dataHora;
                alertaSituacao.textContent = alerta.situacao;
                alertaLocal.textContent = localizacao ? 'üìç DISPON√çVEL' : '‚õî N√ÉO COMPARTILHADO';

                // Feedback visual
                sosButton.style.background = '#4CAF50';
                setTimeout(() => {
                    sosButton.style.background = '#c32f3b';
                }, 500);

                alert('üö® ALERTA ENVIADO!\nSuas pessoas de confian√ßa foram notificadas.');

                // Se tiver localiza√ß√£o, mostrar no mapa
                if (localizacao) {
                    console.log('Localiza√ß√£o:', localizacao);
                }

            } catch (error) {
                console.error('Erro ao enviar alerta:', error);
                alert('Erro ao enviar alerta. Tente novamente.');
            }
        }

        // Reenviar √∫ltimo alerta
        async function reenviarAlerta() {
            const ultimoAlerta = localStorage.getItem('aurora_ultimo_alerta');
            if (ultimoAlerta) {
                await enviarAlerta();
            } else {
                alert('Nenhum alerta anterior para reenviar.');
            }
        }

        // Limpar alerta atual
        function limparAlerta() {
            localStorage.removeItem('aurora_alerta_ativo');
            alertaData.textContent = '--';
            alertaSituacao.textContent = '--';
            alertaLocal.textContent = '--';
            mensagem.value = '';
            alert('‚úÖ Alerta finalizado.');
        }

        // Event listeners
        sosButton.addEventListener('click', enviarAlerta);
        document.getElementById('reenviarBtn').addEventListener('click', reenviarAlerta);
        document.getElementById('limparBtn').addEventListener('click', limparAlerta);
        document.getElementById('sairBtn').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        // Verificar alertas existentes ao carregar
        const ultimoAlerta = localStorage.getItem('aurora_ultimo_alerta');
        if (ultimoAlerta) {
            try {
                const alerta = JSON.parse(ultimoAlerta);
                alertaData.textContent = alerta.dataHora;
                alertaSituacao.textContent = alerta.situacao;
                alertaLocal.textContent = alerta.localizacao ? 'üìç DISPON√çVEL' : '‚õî N√ÉO COMPARTILHADO';
            } catch (e) {
                console.error('Erro ao carregar √∫ltimo alerta:', e);
            }
        }
    </script>
</body>
</html>